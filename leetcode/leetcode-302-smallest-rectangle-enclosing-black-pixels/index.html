<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>302. Smallest Rectangle Enclosing Black Pixels | Keep Walking</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">302. Smallest Rectangle Enclosing Black Pixels</h1><a id="logo" href="/.">Keep Walking</a><p class="description">再出发</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">302. Smallest Rectangle Enclosing Black Pixels</h1><div class="post-meta">Oct 15, 2016<span> | </span><span class="category"><a href="/categories/leetcode/">leetcode</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="leetcode/leetcode-302-smallest-rectangle-enclosing-black-pixels/" href="/leetcode/leetcode-302-smallest-rectangle-enclosing-black-pixels/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>An image is represented by a binary matrix with 0 as a white pixel and 1 as a black pixel. The black pixels are connected, i.e., there is only one black region. Pixels are connected horizontally and vertically. Given the location (x, y) of one of the black pixels, return the area of the smallest (axis-aligned) rectangle that encloses all black pixels.</p>
<p>For example, given the following image:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">[</div><div class="line">  <span class="string">"0010"</span>,</div><div class="line">  <span class="string">"0110"</span>,</div><div class="line">  <span class="string">"0100"</span></div><div class="line">]</div></pre></td></tr></table></figure>
<p>and x = 0, y = 2,<br>Return 6.</p>
<hr>
<p>求能覆盖与(x, y)的相邻的所有1的长方形的面积，其实就是就找所有与(x, y)相邻的点，求出x的最大值，最小值，y的最大值，最小值。 </p>
<p>面积为(max - minx + 1) * (maxy - miny + 1).</p>
<h4 id="方法1：遍历-包含BFS-DFS"><a href="#方法1：遍历-包含BFS-DFS" class="headerlink" title="方法1：遍历 包含BFS, DFS"></a>方法1：遍历 包含BFS, DFS</h4><p>很真观，就是遍历所有相邻的点。我自己写了个DFS的版本<br><figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">int</span> minx = Integer.MAX_VALUE;</div><div class="line"><span class="built_in">int</span> miny = Integer.MAX_VALUE;</div><div class="line"><span class="built_in">int</span> maxx = Integer.MIN_VALUE;</div><div class="line"><span class="built_in">int</span> maxy = Integer.MIN_VALUE;</div><div class="line"><span class="built_in">int</span>[] dx = &#123;<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">-1</span>&#125;;</div><div class="line"><span class="built_in">int</span>[] dy = &#123;<span class="number">1</span>, <span class="number">-1</span>, <span class="number">0</span>, <span class="number">0</span>&#125;;</div><div class="line"><span class="built_in">boolean</span>[][] visited;</div><div class="line"><span class="built_in">int</span> m, n;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="built_in">int</span> minArea(<span class="built_in">char</span>[][] <span class="built_in">image</span>, <span class="built_in">int</span> x, <span class="built_in">int</span> y) &#123;</div><div class="line">    m = <span class="built_in">image</span>.length;</div><div class="line">    n = <span class="built_in">image</span>[<span class="number">0</span>].length;</div><div class="line">    visited = <span class="keyword">new</span> <span class="built_in">boolean</span>[m][n];</div><div class="line"></div><div class="line">    dfs(<span class="built_in">image</span>, x, y);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (maxx - minx + <span class="number">1</span>) * (maxy - miny + <span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">void</span> dfs(<span class="built_in">char</span>[][] <span class="built_in">image</span>, <span class="built_in">int</span> x, <span class="built_in">int</span> y) &#123;</div><div class="line">    <span class="keyword">if</span> (x &lt; <span class="number">0</span> || x &gt;= m || y &lt; <span class="number">0</span> || y &gt;= n || visited[x][y])</div><div class="line">        <span class="keyword">return</span>;</div><div class="line"></div><div class="line">    <span class="keyword">if</span> (<span class="built_in">image</span>[x][y] == <span class="string">'1'</span>) &#123;</div><div class="line">        visited[x][y] = <span class="keyword">true</span>;</div><div class="line">        minx = Math.<span class="built_in">min</span>(x, minx);</div><div class="line">        maxx = Math.<span class="built_in">max</span>(x, maxx);</div><div class="line">        miny = Math.<span class="built_in">min</span>(y, miny);</div><div class="line">        maxy = Math.<span class="built_in">max</span>(y, maxy);</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</div><div class="line">            dfs(<span class="built_in">image</span>, x + dx[i], y + dy[i]);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h4 id="方法2-Binary-Search"><a href="#方法2-Binary-Search" class="headerlink" title="方法2: Binary Search"></a>方法2: Binary Search</h4><p>Ref: </p>
<ol>
<li><a href="https://discuss.leetcode.com/topic/29006/c-java-python-binary-search-solution-with-explanation" target="_blank" rel="external">https://discuss.leetcode.com/topic/29006/c-java-python-binary-search-solution-with-explanation</a></li>
<li><a href="https://discuss.leetcode.com/topic/30621/1ms-java-binary-search-dfs-is-4ms" target="_blank" rel="external">https://discuss.leetcode.com/topic/30621/1ms-java-binary-search-dfs-is-4ms</a></li>
</ol>
<p>我自己是想不到的，就看看别人的做法吧。</p>
<figure class="highlight processing"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="built_in">int</span> minArea(<span class="built_in">char</span>[][] <span class="built_in">image</span>, <span class="built_in">int</span> x, <span class="built_in">int</span> y) &#123;</div><div class="line">    <span class="built_in">int</span> m = <span class="built_in">image</span>.length, n = <span class="built_in">image</span>[<span class="number">0</span>].length;</div><div class="line">    <span class="built_in">int</span> colMin = binarySearch(<span class="built_in">image</span>, <span class="keyword">true</span>, <span class="number">0</span>, y, <span class="number">0</span>, m, <span class="keyword">true</span>);</div><div class="line">    <span class="built_in">int</span> colMax = binarySearch(<span class="built_in">image</span>, <span class="keyword">true</span>, y + <span class="number">1</span>, n, <span class="number">0</span>, m, <span class="keyword">false</span>);</div><div class="line">    <span class="built_in">int</span> rowMin = binarySearch(<span class="built_in">image</span>, <span class="keyword">false</span>, <span class="number">0</span>, x, colMin, colMax, <span class="keyword">true</span>);</div><div class="line">    <span class="built_in">int</span> rowMax = binarySearch(<span class="built_in">image</span>, <span class="keyword">false</span>, x + <span class="number">1</span>, m, colMin, colMax, <span class="keyword">false</span>);</div><div class="line">    <span class="keyword">return</span> (rowMax - rowMin) * (colMax - colMin);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="built_in">int</span> binarySearch(<span class="built_in">char</span>[][] <span class="built_in">image</span>, <span class="built_in">boolean</span> horizontal, <span class="built_in">int</span> lower, <span class="built_in">int</span> upper, <span class="built_in">int</span> <span class="built_in">min</span>, <span class="built_in">int</span> <span class="built_in">max</span>, <span class="built_in">boolean</span> goLower) &#123;</div><div class="line">    <span class="keyword">while</span> (lower &lt; upper) &#123;</div><div class="line">        <span class="built_in">int</span> mid = lower + (upper - lower) / <span class="number">2</span>;</div><div class="line">        <span class="built_in">boolean</span> inside = <span class="keyword">false</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="built_in">int</span> i = <span class="built_in">min</span>; i &lt; <span class="built_in">max</span>; i++) &#123;</div><div class="line">            <span class="keyword">if</span> ((horizontal ? <span class="built_in">image</span>[i][mid] : <span class="built_in">image</span>[mid][i]) == <span class="string">'1'</span>) &#123;</div><div class="line">                inside = <span class="keyword">true</span>;</div><div class="line">                <span class="keyword">break</span>;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">if</span> (inside == goLower) &#123;</div><div class="line">            upper = mid;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            lower = mid + <span class="number">1</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> lower;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://hongzheng.me/leetcode/leetcode-302-smallest-rectangle-enclosing-black-pixels/" data-id="ciunmejxp0038egonisojbv09" class="article-share-link">Share</a><div class="tags"><a href="/tags/leetcode/">leetcode</a></div><div class="post-nav"><a href="/leetcode/leetcode-233-number-of-digit-one/" class="pre">233. Number of Digit One</a><a href="/leetcode/leetcode-320-generalized-abbreviation/" class="next">320. Generalized Abbreviation</a></div><div id="disqus_thread"><script>var disqus_shortname = 'hongzheng';
var disqus_identifier = 'leetcode/leetcode-302-smallest-rectangle-enclosing-black-pixels/';
var disqus_title = '302. Smallest Rectangle Enclosing Black Pixels';
var disqus_url = 'http://hongzheng.me/leetcode/leetcode-302-smallest-rectangle-enclosing-black-pixels/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//hongzheng.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://hongzheng.me"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lintcode/">lintcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/政治与社会/">政治与社会</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/Interview/" style="font-size: 15px;">Interview</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/lintcode/" style="font-size: 15px;">lintcode</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-407-trapping-rain-water-ii/">407. Trapping Rain Water II</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-42-trapping-rain-water/">42. Trapping Rain Water</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-434-number-of-islands-ii/">434. Number of Islands II</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-123-word-search/">123. Word Search</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-431-find-the-connected-component-in-the-undirected-graph/">431. Find the Connected Component in the Undirected Graph</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-432-find-the-weak-connected-component-in-the-directed-graph/">432. Find the Weak Connected Component in the Directed Graph</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-473-add-and-search-word/">473. Add and Search Word</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-261-graph-valid-tree/">leetcode-261-graph-valid-tree</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-465-kth-smallest-sum-in-two-sorted-arrays/">465. Kth Smallest Sum In Two Sorted Arrays</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-55-compare-strings/">55. Compare Strings</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//hongzheng.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Keep Walking.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-85108926-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>