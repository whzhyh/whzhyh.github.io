<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>351. Android Unlock Patterns | Keep Walking</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">351. Android Unlock Patterns</h1><a id="logo" href="/.">Keep Walking</a><p class="description">再出发</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">351. Android Unlock Patterns</h1><div class="post-meta">Nov 8, 2016<span> | </span><span class="category"><a href="/categories/leetcode/">leetcode</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="leetcode/leetcode-351-android-unlock-patterns/" href="/leetcode/leetcode-351-android-unlock-patterns/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>Given an Android 3x3 key lock screen and two integers m and n, where 1 ≤ m ≤ n ≤ 9, count the total number of unlock patterns of the Android lock screen, which consist of minimum of m keys and maximum n keys.</p>
<p><strong>Rules for a valid pattern:</strong></p>
<ol>
<li>Each pattern must connect at least m keys and at most n keys.</li>
<li>All the keys must be distinct.</li>
<li>If the line connecting two consecutive keys in the pattern passes through any other keys, the other keys must have previously selected in the pattern. No jumps through non selected key is allowed.</li>
<li>The order of keys used matters.</li>
</ol>
<p>Explanation:</p>
<figure class="highlight gherkin"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">|<span class="string"> 1 </span>|<span class="string"> 2 </span>|<span class="string"> 3 </span>|</div><div class="line">|<span class="string"> 4 </span>|<span class="string"> 5 </span>|<span class="string"> 6 </span>|</div><div class="line">|<span class="string"> 7 </span>|<span class="string"> 8 </span>|<span class="string"> 9 </span>|</div></pre></td></tr></table></figure>
<p><strong>Invalid move:</strong> <code>4 - 1 - 3 - 6</code><br>Line 1 - 3 passes through key 2 which had not been  selected in the pattern.</p>
<p><strong>Invalid move:</strong> <code>4 - 1 - 9 - 2</code><br>Line 1 - 9 passes through key 5 which had not been  selected in the pattern.</p>
<p><strong>Valid move:</strong> <code>2 - 4 - 1 - 3 - 6</code><br>Line 1 - 3 is valid because it passes through key 2,  which had been selected in the pattern</p>
<p><strong>Valid move:</strong> <code>6 - 5 - 4 - 1 - 9 - 2</code><br>Line 1 - 9 is valid because it passes through key 5,  which had been selected in the pattern.</p>
<p><strong>Example:</strong><br>Given m = 1, n = 1, return 9.</p>
<hr>
<h4 id="DFS-with-Backtracking"><a href="#DFS-with-Backtracking" class="headerlink" title="DFS with Backtracking"></a>DFS with Backtracking</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">int</span> <span class="title">DFS</span><span class="params">(<span class="keyword">boolean</span> vis[], <span class="keyword">int</span>[][] skip, <span class="keyword">int</span> cur, <span class="keyword">int</span> remain)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (remain &lt; <span class="number">0</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">if</span> (remain == <span class="number">0</span>) <span class="keyword">return</span> <span class="number">1</span>;</div><div class="line">    vis[cur] = <span class="keyword">true</span>;</div><div class="line">    <span class="keyword">int</span> rst = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">9</span>; ++i) &#123;</div><div class="line">        <span class="comment">// If vis[i] is not visited and (two numbers are adjacent or skip number is already visited)</span></div><div class="line">        <span class="keyword">if</span> (!vis[i] &amp;&amp; (skip[cur][i] == <span class="number">0</span> || (vis[skip[cur][i]]))) &#123;</div><div class="line">            rst += DFS(vis, skip, i, remain - <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    vis[cur] = <span class="keyword">false</span>;</div><div class="line">    <span class="keyword">return</span> rst;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">numberOfPatterns</span><span class="params">(<span class="keyword">int</span> m, <span class="keyword">int</span> n)</span> </span>&#123;</div><div class="line">    <span class="comment">// Skip array represents number to skip between two pairs</span></div><div class="line">    <span class="keyword">int</span> skip[][] = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">10</span>][<span class="number">10</span>];</div><div class="line">    skip[<span class="number">1</span>][<span class="number">3</span>] = skip[<span class="number">3</span>][<span class="number">1</span>] = <span class="number">2</span>;</div><div class="line">    skip[<span class="number">1</span>][<span class="number">7</span>] = skip[<span class="number">7</span>][<span class="number">1</span>] = <span class="number">4</span>;</div><div class="line">    skip[<span class="number">3</span>][<span class="number">9</span>] = skip[<span class="number">9</span>][<span class="number">3</span>] = <span class="number">6</span>;</div><div class="line">    skip[<span class="number">7</span>][<span class="number">9</span>] = skip[<span class="number">9</span>][<span class="number">7</span>] = <span class="number">8</span>;</div><div class="line">    skip[<span class="number">1</span>][<span class="number">9</span>] = skip[<span class="number">9</span>][<span class="number">1</span>] = skip[<span class="number">2</span>][<span class="number">8</span>] = skip[<span class="number">8</span>][<span class="number">2</span>] = skip[<span class="number">3</span>][<span class="number">7</span>] = skip[<span class="number">7</span>][<span class="number">3</span>] = skip[<span class="number">4</span>][<span class="number">6</span>] = skip[<span class="number">6</span>][<span class="number">4</span>] = <span class="number">5</span>;</div><div class="line">    <span class="keyword">boolean</span> vis[] = <span class="keyword">new</span> <span class="keyword">boolean</span>[<span class="number">10</span>];</div><div class="line">    <span class="keyword">int</span> rst = <span class="number">0</span>;</div><div class="line">    <span class="comment">// DFS search each length from m to n</span></div><div class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = m; i &lt;= n; ++i) &#123;</div><div class="line">        rst += DFS(vis, skip, <span class="number">1</span>, i - <span class="number">1</span>) * <span class="number">4</span>;    <span class="comment">// 1, 3, 7, 9 are symmetric</span></div><div class="line">        rst += DFS(vis, skip, <span class="number">2</span>, i - <span class="number">1</span>) * <span class="number">4</span>;    <span class="comment">// 2, 4, 6, 8 are symmetric</span></div><div class="line">        rst += DFS(vis, skip, <span class="number">5</span>, i - <span class="number">1</span>);        <span class="comment">// 5</span></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> rst;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://hongzheng.me/leetcode/leetcode-351-android-unlock-patterns/" data-id="civtwac2k006afronv23yq0ok" class="article-share-link">Share</a><div class="tags"><a href="/tags/leetcode/">leetcode</a></div><div class="post-nav"><a href="/leetcode/leetcode-447-number-of-boomerangs/" class="pre">447. Number of Boomerangs</a><a href="/leetcode/leetcode-441-arranging-coins/" class="next">441. Arranging Coins</a></div><div id="disqus_thread"><script>var disqus_shortname = 'hongzheng';
var disqus_identifier = 'leetcode/leetcode-351-android-unlock-patterns/';
var disqus_title = '351. Android Unlock Patterns';
var disqus_url = 'http://hongzheng.me/leetcode/leetcode-351-android-unlock-patterns/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//hongzheng.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://hongzheng.me"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lintcode/">lintcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/政治与社会/">政治与社会</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Interview/" style="font-size: 15px;">Interview</a> <a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/lintcode/" style="font-size: 15px;">lintcode</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/amazon-oa2-work-simulation/">Amazon OA2 Work Simulation</a></li><li class="post-list-item"><a class="post-list-link" href="/amazon-oa2/">Amazon OA2</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-340-longest-substring-with-at-most-k-distinct-characters/">340. Longest Substring with At Most K Distinct Characters</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-298-binary-tree-longest-consecutive-sequence/">298. Binary Tree Longest Consecutive Sequence</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-165-compare-version-numbers/">165. Compare Version Numbers</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-54-spiral-matrix/">54. Spiral Matrix</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-439-ternary-expression-parser/">439. Ternary Expression Parser</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-419-battleships-in-a-board/">419. Battleships in a Board</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-377-combination-sum-iv/">377. Combination Sum IV</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-394-decode-string/">394. Decode String</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//hongzheng.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Keep Walking.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-85108926-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>