<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>364. Nested List Weight Sum II | Keep Walking</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">364. Nested List Weight Sum II</h1><a id="logo" href="/.">Keep Walking</a><p class="description">再出发</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">364. Nested List Weight Sum II</h1><div class="post-meta">Oct 13, 2016<span> | </span><span class="category"><a href="/categories/leetcode/">leetcode</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="leetcode/leetcode-364-nested-list-weight-sum-ii/" href="/leetcode/leetcode-364-nested-list-weight-sum-ii/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>Given a nested list of integers, return the sum of all integers in the list weighted by their depth.</p>
<p>Each element is either an integer, or a list – whose elements may also be integers or other lists.</p>
<p>Different from the previous question where weight is increasing from root to leaf, now the weight is defined from bottom up. i.e., the leaf level integers have weight 1, and the root level integers have the largest weight.</p>
<p><strong>Example 1:</strong><br>Given the list [[1,1],2,[1,1]], return 8. (four 1’s at depth 1, one 2 at depth 2)</p>
<p><strong>Example 2:</strong><br>Given the list [1,[4,[6]]], return 17. (one 1 at depth 3, one 4 at depth 2, and one 6 at depth 1; 1<em>3 + 4</em>2 + 6*1 = 17)</p>
<hr>
<h4 id="先计算depth-再计算"><a href="#先计算depth-再计算" class="headerlink" title="先计算depth, 再计算"></a>先计算depth, 再计算</h4><p>这是一种比较直接的做法，就是先计算出最深的depth. 然后，每一层深度递减.</p>
<figure class="highlight aspectj"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> sum = <span class="number">0</span>;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">depthSumInverse</span><span class="params">(List&lt;NestedInteger&gt; nestedList)</span> </span>&#123;</div><div class="line">    <span class="keyword">if</span> (nestedList == <span class="keyword">null</span>)</div><div class="line">        <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> depth = maxDepth(nestedList);</div><div class="line">    helper(nestedList, depth);</div><div class="line">    <span class="keyword">return</span> sum;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">int</span> <span class="title">maxDepth</span><span class="params">(List&lt;NestedInteger&gt; nestedList)</span> </span>&#123;</div><div class="line">    <span class="keyword">int</span> depth = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (NestedInteger n : nestedList) &#123;</div><div class="line">        <span class="keyword">if</span> (!n.isInteger()) &#123;</div><div class="line">            depth = Math.max(maxDepth(n.getList()), depth);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> depth + <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">void</span> <span class="title">helper</span><span class="params">(List&lt;NestedInteger&gt; nestedList, <span class="keyword">int</span> depth)</span> </span>&#123;</div><div class="line">    <span class="keyword">for</span> (NestedInteger n : nestedList) &#123;</div><div class="line">        <span class="keyword">if</span> (n.isInteger()) &#123;</div><div class="line">            sum += n.getInteger() * depth;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            helper(n.getList(), depth - <span class="number">1</span>);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="BFS"><a href="#BFS" class="headerlink" title="BFS"></a>BFS</h4><p>开始也想这样做来着，但是没有处理好depth. 譬如说 <code>[1,[4,[6]]]</code>，这样的话，先访问的是1，但是它的深度应该是3，而不是1。但是这个方法里很好的处理了这个问题。就是把没有乘以depth的值，每向下一层，就多加到total里一次。</p>
<figure class="highlight gradle"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> depthSumInverse(List&lt;NestedInteger&gt; nestedList) &#123;</div><div class="line">    <span class="keyword">if</span> (nestedList == <span class="keyword">null</span>) <span class="keyword">return</span> <span class="number">0</span>;</div><div class="line">    Queue&lt;NestedInteger&gt; queue = <span class="keyword">new</span> LinkedList&lt;NestedInteger&gt;();</div><div class="line">    <span class="keyword">int</span> prev = <span class="number">0</span>;</div><div class="line">    <span class="keyword">int</span> total = <span class="number">0</span>;</div><div class="line">    <span class="keyword">for</span> (NestedInteger <span class="keyword">next</span> : nestedList) &#123;</div><div class="line">        queue.offer(<span class="keyword">next</span>);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (!queue.isEmpty()) &#123;</div><div class="line">        <span class="keyword">int</span> <span class="keyword">size</span> = queue.<span class="keyword">size</span>();</div><div class="line">        <span class="keyword">int</span> levelSum = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="keyword">size</span>; i++) &#123;</div><div class="line">            NestedInteger current = queue.poll();</div><div class="line">            <span class="keyword">if</span> (current.isInteger()) levelSum += current.getInteger();</div><div class="line">            List&lt;NestedInteger&gt; nextList = current.getList();</div><div class="line">            <span class="keyword">if</span> (nextList != <span class="keyword">null</span>) &#123;</div><div class="line">                <span class="keyword">for</span> (NestedInteger <span class="keyword">next</span> : nextList) &#123;</div><div class="line">                    queue.offer(<span class="keyword">next</span>);</div><div class="line">                &#125;</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        prev += levelSum;</div><div class="line">        total += prev;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> total;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h4 id="跟上一种很像，也算是BFS"><a href="#跟上一种很像，也算是BFS" class="headerlink" title="跟上一种很像，也算是BFS"></a>跟上一种很像，也算是BFS</h4><figure class="highlight zephir"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">int</span> depthSumInverse(<span class="keyword">List</span>&lt;NestedInteger&gt; nestedList) &#123;</div><div class="line">    <span class="keyword">int</span> unweighted = <span class="number">0</span>, weighted = <span class="number">0</span>;</div><div class="line">    <span class="keyword">while</span> (!nestedList.isEmpty()) &#123;</div><div class="line">        <span class="keyword">List</span>&lt;NestedInteger&gt; nextLevel = <span class="keyword">new</span> ArrayList&lt;&gt;();</div><div class="line">        <span class="keyword">for</span> (NestedInteger ni : nestedList) &#123;</div><div class="line">            <span class="keyword">if</span> (ni.isInteger())</div><div class="line">                unweighted += ni.getInteger();</div><div class="line">            <span class="keyword">else</span></div><div class="line">                nextLevel.addAll(ni.getList());</div><div class="line">        &#125;</div><div class="line">        weighted += unweighted;</div><div class="line">        nestedList = nextLevel;</div><div class="line">    &#125;</div><div class="line">    <span class="keyword">return</span> weighted;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Ref:</p>
<ol>
<li><a href="https://discuss.leetcode.com/topic/49488/java-ac-bfs-solution" target="_blank" rel="external">https://discuss.leetcode.com/topic/49488/java-ac-bfs-solution</a></li>
<li><a href="https://discuss.leetcode.com/topic/49041/no-depth-variable-no-multiplication" target="_blank" rel="external">https://discuss.leetcode.com/topic/49041/no-depth-variable-no-multiplication</a></li>
</ol>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://hongzheng.me/leetcode/leetcode-364-nested-list-weight-sum-ii/" data-id="civq840e3006h4yonesa8wpa2" class="article-share-link">Share</a><div class="tags"><a href="/tags/leetcode/">leetcode</a></div><div class="post-nav"><a href="/leetcode/leetcode-245-shortest-word-distance-iii/" class="pre">245. Shortest Word Distance III</a><a href="/leetcode/leetcode-319-bulb-switcher/" class="next">319. Bulb Switcher</a></div><div id="disqus_thread"><script>var disqus_shortname = 'hongzheng';
var disqus_identifier = 'leetcode/leetcode-364-nested-list-weight-sum-ii/';
var disqus_title = '364. Nested List Weight Sum II';
var disqus_url = 'http://hongzheng.me/leetcode/leetcode-364-nested-list-weight-sum-ii/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//hongzheng.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://hongzheng.me"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lintcode/">lintcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/政治与社会/">政治与社会</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/Interview/" style="font-size: 15px;">Interview</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/lintcode/" style="font-size: 15px;">lintcode</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-340-longest-substring-with-at-most-k-distinct-characters/">340. Longest Substring with At Most K Distinct Characters</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-298-binary-tree-longest-consecutive-sequence/">298. Binary Tree Longest Consecutive Sequence</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-165-compare-version-numbers/">165. Compare Version Numbers</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-54-spiral-matrix/">54. Spiral Matrix</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-439-ternary-expression-parser/">439. Ternary Expression Parser</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-419-battleships-in-a-board/">419. Battleships in a Board</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-377-combination-sum-iv/">377. Combination Sum IV</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-394-decode-string/">394. Decode String</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-361-bomb-enemy/">361. Bomb Enemy</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-422-valid-word-square/">422. Valid Word Square</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//hongzheng.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Keep Walking.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-85108926-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>