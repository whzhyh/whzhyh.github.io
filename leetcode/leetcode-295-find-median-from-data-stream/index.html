<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>295. Find Median from Data Stream | Keep Walking</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">295. Find Median from Data Stream</h1><a id="logo" href="/.">Keep Walking</a><p class="description">再出发</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">295. Find Median from Data Stream</h1><div class="post-meta">Oct 5, 2016<span> | </span><span class="category"><a href="/categories/leetcode/">leetcode</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="leetcode/leetcode-295-find-median-from-data-stream/" href="/leetcode/leetcode-295-find-median-from-data-stream/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>Median is the middle value in an ordered integer list. If the size of the list is even, there is no middle value. So the median is the mean of the two middle value.</p>
<p>Examples:<br>[2,3,4] , the median is 3</p>
<p>[2,3], the median is (2 + 3) / 2 = 2.5</p>
<p>Design a data structure that supports the following two operations:</p>
<ul>
<li>void addNum(int num) - Add a integer number from the data stream to the data structure.</li>
<li>double findMedian() - Return the median of all elements so far.</li>
</ul>
<p>For example:<br><figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">add</span><span class="params">(<span class="number">1</span>)</span></span></div><div class="line"><span class="function"><span class="title">add</span><span class="params">(<span class="number">2</span>)</span></span></div><div class="line"><span class="function"><span class="title">findMedian</span><span class="params">()</span></span> -&gt; <span class="number">1.5</span></div><div class="line"><span class="function"><span class="title">add</span><span class="params">(<span class="number">3</span>)</span></span> </div><div class="line"><span class="function"><span class="title">findMedian</span><span class="params">()</span></span> -&gt; <span class="number">2</span></div></pre></td></tr></table></figure></p>
<hr>
<p>一个堆的典型应用。用最大堆存较小的那一半数据，最小堆存较大的那一半数据。</p>
<p>代码如下：</p>
<figure class="highlight arduino"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">class</span> MedianFinder &#123;</div><div class="line">    PriorityQueue&lt;Integer&gt; <span class="built_in">min</span> = <span class="keyword">new</span> PriorityQueue&lt;&gt;();</div><div class="line">    PriorityQueue&lt;Integer&gt; <span class="built_in">max</span> = <span class="keyword">new</span> PriorityQueue&lt;&gt;(Collections.reverseOrder());</div><div class="line"></div><div class="line">    <span class="comment">// Adds a number into the data structure.</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> addNum(<span class="keyword">int</span> num) &#123;</div><div class="line">        <span class="built_in">max</span>.offer(num);</div><div class="line">        <span class="built_in">min</span>.offer(<span class="built_in">max</span>.poll());</div><div class="line">        <span class="built_in">if</span> (<span class="built_in">max</span>.<span class="built_in">size</span>() &lt; <span class="built_in">min</span>.<span class="built_in">size</span>()) &#123;</div><div class="line">            <span class="built_in">max</span>.offer(<span class="built_in">min</span>.poll());</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">// Returns the median of current data stream</span></div><div class="line">    <span class="keyword">public</span> <span class="keyword">double</span> findMedian() &#123;</div><div class="line">        <span class="built_in">if</span> (<span class="built_in">max</span>.<span class="built_in">size</span>() &gt; <span class="built_in">min</span>.<span class="built_in">size</span>())</div><div class="line">            <span class="built_in">return</span> <span class="built_in">max</span>.<span class="built_in">peek</span>();</div><div class="line">        <span class="built_in">else</span> &#123;</div><div class="line">            <span class="built_in">return</span> (<span class="built_in">max</span>.<span class="built_in">peek</span>() + <span class="built_in">min</span>.<span class="built_in">peek</span>()) / <span class="number">2.0</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://hongzheng.me/leetcode/leetcode-295-find-median-from-data-stream/" data-id="ciuntqfou003tnhonfb2rv14a" class="article-share-link">Share</a><div class="tags"><a href="/tags/leetcode/">leetcode</a></div><div class="post-nav"><a href="/leetcode/leetcode-249-group-shifted-strings/" class="pre">249. Group Shifted Strings</a><a href="/leetcode/leetcode-397-integer-replacement/" class="next">397. Integer Replacement</a></div><div id="disqus_thread"><script>var disqus_shortname = 'hongzheng';
var disqus_identifier = 'leetcode/leetcode-295-find-median-from-data-stream/';
var disqus_title = '295. Find Median from Data Stream';
var disqus_url = 'http://hongzheng.me/leetcode/leetcode-295-find-median-from-data-stream/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//hongzheng.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://hongzheng.me"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lintcode/">lintcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/政治与社会/">政治与社会</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/Interview/" style="font-size: 15px;">Interview</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/lintcode/" style="font-size: 15px;">lintcode</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-32-minimum-window-substring/">32. Minimum Window Substring</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-203-segment-tree-modify/">203. Segment Tree Modify</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-202-segment-tree-query/">202. Segment Tree Query</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-201-segment-tree-build/">201. Segment Tree Build</a></li><li class="post-list-item"><a class="post-list-link" href="/segment-tree/">Segment Tree 区间树</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-360-sliding-window-median/">360. Sliding Window Median</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-362-sliding-window-maximum/">362. Sliding Window Maximum</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-81-data-stream-median/">81. Data Stream Median</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-131-building-outline/">131. Building Outline</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-407-trapping-rain-water-ii/">407. Trapping Rain Water II</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//hongzheng.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Keep Walking.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-85108926-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>