<!DOCTYPE html><html lang="en"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>362. Design Hit Counter | Keep Walking</title><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/4.2.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.0/grids-responsive-min.css"><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.6.3/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">362. Design Hit Counter</h1><a id="logo" href="/.">Keep Walking</a><p class="description">再出发</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> Home</i></a><a href="/archives/"><i class="fa fa-archive"> Archive</i></a><a href="/about/"><i class="fa fa-user"> About</i></a><a href="/atom.xml"><i class="fa fa-rss"> RSS</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">362. Design Hit Counter</h1><div class="post-meta">Oct 6, 2016<span> | </span><span class="category"><a href="/categories/leetcode/">leetcode</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> Hits</span></span></div><a data-disqus-identifier="leetcode/leetcode-362-design-hit-counter/" href="/leetcode/leetcode-362-design-hit-counter/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><p>Design a hit counter which counts the number of hits received in the past 5 minutes.</p>
<p>Each function accepts a timestamp parameter (in seconds granularity) and you may assume that calls are being made to the system in chronological order (ie, the timestamp is monotonically increasing). You may assume that the earliest timestamp starts at 1.</p>
<p>It is possible that several hits arrive roughly at the same time.</p>
<p><strong>Example:</strong><br><figure class="highlight pony"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="type">HitCounter</span> counter = <span class="function"><span class="keyword">new</span> <span class="title">HitCounter</span>();</span></div><div class="line"></div><div class="line"><span class="comment">// hit at timestamp 1.</span></div><div class="line"><span class="title">counter</span>.<span class="title">hit</span>(<span class="number">1</span>);</div><div class="line"></div><div class="line"><span class="comment">// hit at timestamp 2.</span></div><div class="line"><span class="title">counter</span>.<span class="title">hit</span>(<span class="number">2</span>);</div><div class="line"></div><div class="line"><span class="comment">// hit at timestamp 3.</span></div><div class="line"><span class="title">counter</span>.<span class="title">hit</span>(<span class="number">3</span>);</div><div class="line"></div><div class="line"><span class="comment">// get hits at timestamp 4, should return 3.</span></div><div class="line"><span class="title">counter</span>.<span class="title">getHits</span>(<span class="number">4</span>);</div><div class="line"></div><div class="line"><span class="comment">// hit at timestamp 300.</span></div><div class="line"><span class="title">counter</span>.<span class="title">hit</span>(<span class="number">300</span>);</div><div class="line"></div><div class="line"><span class="comment">// get hits at timestamp 300, should return 4.</span></div><div class="line"><span class="title">counter</span>.<span class="title">getHits</span>(<span class="number">300</span>);</div><div class="line"></div><div class="line"><span class="comment">// get hits at timestamp 301, should return 3.</span></div><div class="line"><span class="title">counter</span>.<span class="title">getHits</span>(<span class="number">301</span>);</div></pre></td></tr></table></figure></p>
<p><strong>Follow up:</strong>  </p>
<p>What if the number of hits per second could be very large? Does your design scale?</p>
<hr>
<p>Ref: <a href="https://discuss.leetcode.com/topic/48758/super-easy-design-o-1-hit-o-s-gethits-no-fancy-data-structure-is-needed" target="_blank" rel="external">https://discuss.leetcode.com/topic/48758/super-easy-design-o-1-hit-o-s-gethits-no-fancy-data-structure-is-needed</a></p>
<figure class="highlight axapta"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HitCounter</span> </span>&#123;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] times;</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span>[] hits;</div><div class="line">    <span class="comment">/** Initialize your data structure here. */</span></div><div class="line">    <span class="keyword">public</span> HitCounter() &#123;</div><div class="line">        times = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">300</span>];</div><div class="line">        hits = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">300</span>];</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/** Record a hit.</span></div><div class="line">        @param timestamp - The current timestamp (in seconds granularity). */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">void</span> hit(<span class="keyword">int</span> timestamp) &#123;</div><div class="line">        <span class="keyword">int</span> <span class="keyword">index</span> = timestamp % <span class="number">300</span>;</div><div class="line">        <span class="keyword">if</span> (times[<span class="keyword">index</span>] != timestamp) &#123;</div><div class="line">            times[<span class="keyword">index</span>] = timestamp;</div><div class="line">            hits[<span class="keyword">index</span>] = <span class="number">1</span>;</div><div class="line">        &#125; <span class="keyword">else</span> &#123;</div><div class="line">            hits[<span class="keyword">index</span>]++;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/** Return the number of hits in the past 5 minutes.</span></div><div class="line">        @param timestamp - The current timestamp (in seconds granularity). */</div><div class="line">    <span class="keyword">public</span> <span class="keyword">int</span> getHits(<span class="keyword">int</span> timestamp) &#123;</div><div class="line">        <span class="keyword">int</span> total = <span class="number">0</span>;</div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">300</span>; i++) &#123;</div><div class="line">            <span class="keyword">if</span> (timestamp - times[i] &lt; <span class="number">300</span>) &#123;</div><div class="line">                total += hits[i];</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> total;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://hongzheng.me/leetcode/leetcode-362-design-hit-counter/" data-id="cius234sq00473ponsyxfycfs" class="article-share-link">Share</a><div class="tags"><a href="/tags/leetcode/">leetcode</a></div><div class="post-nav"><a href="/leetcode/leetcode-357-count-numbers-with-unique-digits/" class="pre">357. Count Numbers with Unique Digits</a><a href="/leetcode/leetcode-369-plus-one-linked-list/" class="next">369. Plus One Linked List</a></div><div id="disqus_thread"><script>var disqus_shortname = 'hongzheng';
var disqus_identifier = 'leetcode/leetcode-362-design-hit-counter/';
var disqus_title = '362. Design Hit Counter';
var disqus_url = 'http://hongzheng.me/leetcode/leetcode-362-design-hit-counter/';
(function() {
  var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//hongzheng.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://hongzheng.me"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> Categories</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/database/">database</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/leetcode/">leetcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/lintcode/">lintcode</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/web/">web</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/政治与社会/">政治与社会</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/生活/">生活</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> Tags</i></div><div class="tagcloud"><a href="/tags/Algorithm/" style="font-size: 15px;">Algorithm</a> <a href="/tags/web/" style="font-size: 15px;">web</a> <a href="/tags/Interview/" style="font-size: 15px;">Interview</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/leetcode/" style="font-size: 15px;">leetcode</a> <a href="/tags/lintcode/" style="font-size: 15px;">lintcode</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> Recent</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-32-minimum-window-substring/">32. Minimum Window Substring</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-203-segment-tree-modify/">203. Segment Tree Modify</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-202-segment-tree-query/">202. Segment Tree Query</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-201-segment-tree-build/">201. Segment Tree Build</a></li><li class="post-list-item"><a class="post-list-link" href="/segment-tree/">Segment Tree 区间树</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-360-sliding-window-median/">360. Sliding Window Median</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-362-sliding-window-maximum/">362. Sliding Window Maximum</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-81-data-stream-median/">81. Data Stream Median</a></li><li class="post-list-item"><a class="post-list-link" href="/lintcode/lintcode-131-building-outline/">131. Building Outline</a></li><li class="post-list-item"><a class="post-list-link" href="/leetcode/leetcode-407-trapping-rain-water-ii/">407. Trapping Rain Water II</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> Recent Comments</i></div><script type="text/javascript" src="//hongzheng.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">© <a href="/." rel="nofollow">Keep Walking.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/2.1.5/jquery.fancybox.pack.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="/css/jquery.fancybox.css?v=0.0.0"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
ga('create','UA-85108926-1','auto');ga('send','pageview');
</script><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>